<html>
<head>

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>sample</title>

 <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.1/dist/leaflet.css"/>
 <script src="https://unpkg.com/leaflet@1.3.1/dist/leaflet.js"></script>
    
    <link href="stylesheet.css" rel="stylesheet" />

</head>

<body>

<br>

<div style="margin-left:10%;margin-right:10%;">
<button style="width:100%;padding:10px;font-size:30px;" class="btn btn--orange" type="button" onclick="location.reload();">現在地を確認（リロード）</button> 
</div>
    
<br>

<div id="map" width="300px"></div>

<script>

/*
var t_std = new L.tileLayer('http://cyberjapandata.gsi.go.jp/xyz/std/{z}/{x}/{y}.png', {
attribution: "<a href='http://www.gsi.go.jp/kikakuchousei/kikakuchousei40182.html' target='_blank'>国土地理院</a>"
});

var t_pale = new L.tileLayer('http://cyberjapandata.gsi.go.jp/xyz/pale/{z}/{x}/{y}.png', {
attribution: "<a href='http://www.gsi.go.jp/kikakuchousei/kikakuchousei40182.html' target='_blank'>国土地理院</a>"
});
    
var o_std = new L.tileLayer('http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
attribution: '&amp;copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'
});
*/

var t_ort = new L.tileLayer('http://cyberjapandata.gsi.go.jp/xyz/ort/{z}/{x}/{y}.jpg', {
attribution: "<a href='http://www.gsi.go.jp/kikakuchousei/kikakuchousei40182.html' target='_blank'>国土地理院</a>"
});

var map = L.map('map', {
zoomControl: false,
layers: [t_ort]
});

var mapMarker;
var comment;

map.locate({setView: true, maxZoom: 20});
   
// アイコンの設定
var humanIcon = L.icon({
    iconUrl: 'human.png',
    iconSize:     [55, 75], // size of the icon
    popupAnchor:  [0, -35] // point from which the popup should open relative to the iconAnchor
});
    
// 現在地の出力
function onLocationFound(e) {
'use strict';
mapMarker = L.marker(e.latlng, {icon: humanIcon}).addTo(map);
comment = 'いまここ!!';
mapMarker.bindPopup(comment).openPopup();
}

function onLocationError(e) {
'use strict';
window.alert('位置情報取得に失敗しました。');
}

map.on('locationfound', onLocationFound);
map.on('locationerror', onLocationError);

/*
var Map_BaseLayer = {
"地理院地図 標準": t_std,
"地理院地図 淡色": t_pale,
"地理院地図 オルソ": t_ort,
"OpenStreetMap 標準": o_std
};
*/

L.control.scale({ imperial: false, maxWidth: 300 }).addTo(map);
    
/*
L.control.layers(Map_BaseLayer, null, { collapsed: false }).addTo(map);
*/

// コケマーカーの見た目を定義
  var my_icon = L.icon({
    iconUrl: 'moss_mark.png',
    iconSize: [55, 75], // size of the icon
  });
    
L.marker([35.5162271398842, 134.17334012890518], {icon: my_icon}).addTo(map).bindPopup('<img src="./image/moss1.jpg" style="width:500px;"><br />' + "moss1",{maxWidth:"500",closeOnClick: true});
L.marker([35.51665936857214, 134.17349566800678], {icon: my_icon}).addTo(map).bindPopup('<img src="./image/moss2.jpg" style="width:500px;"><br />' + "moss2",{maxWidth:"500",closeOnClick: true});
L.marker([35.516397, 134.173875], {icon: my_icon}).addTo(map).bindPopup('<img src="./image/moss3.jpg" style="width:500px;"><br />' + "moss3",{maxWidth:"500",closeOnClick: true});
L.marker([35.516231, 134.173772], {icon: my_icon}).addTo(map).bindPopup('<img src="./image/moss4.jpg" style="width:500px;"><br />' + "moss4",{maxWidth:"500",closeOnClick: true});
L.marker([35.51591944, 134.17474444], {icon: my_icon}).addTo(map).bindPopup('<img src="./image/moss5.jpg" style="width:500px;"><br />' + "moss5",{maxWidth:"500",closeOnClick: true});

    
</script>

</body>

</html>

<!--
https://day-journal.com/memo/leaflet-020/
-->
